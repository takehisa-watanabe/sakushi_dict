<%=@word%>

<%@kanren_to_kanren.each_with_index do |kanren,i|%>
<%=kanren[0]%>
<%end%>

<table border="1">
<tr>
    <th>
        <%= @word.kaki%>
    </th>

    <th>
        <%=@word.yomi%><br>
    </th>

    <th>
        <%=@word.jisuu%><br>
    </th>

    <th>
        <%=@word.groove%><br>
    </th>

    <th>
        <%=@word.boin%><br>
    </th>

    <th>
        <%=@word.hinshi%><br>
    </th>
    <th>
        <%=@word.category%><br>
    </th>
</table>

<br>
<h1>関連語</h1>
<table border="1" id="targetTable">
<tr>
    <th width="150">
        1
    </th>
    <th width="150">
        2
    </th>
    <th width="150">
        3
    </th>
    <th width="150">
        4
    </th>
</tr>
<tr>
    <%@kanren_to_kanren.each do |kanren|%>
    

    <%celllength1 = kanren[1].size%>
      <%kanren[1].each do |kanren2|%>
        <%if kanren2[1].size>=1%>
        <%celllength1 = celllength1 + kanren2[1].size-1%>
        <%end%>
        <%kanren2[1].each do |kanren3|%>
          <%if kanren3[1].size>=1%>
          <%celllength1 = celllength1 + kanren3[1].size-1%>
          <%end%>
        <%end%>
      <%end%>
        <%if celllength1 == 0%>
        <%celllength1 = 1%>
        <%end%>
      <th rowspan = <%=celllength1.to_s%>>
      <%=kanren[0]%>
      </th>
        <%if kanren[1][0]==nil%>
        <th></th><th></th><th></th></tr>
        <%end%>
      <%kanren[1].each_with_index do |kanren2,i|%>


       <%celllength2 = kanren2[1].size%>
         <%kanren2[1].each do |kanren3|%>
         <%if kanren3[1].size>=1%>
           <%celllength2 = celllength2 + kanren3[1].size-1%>

          <%end%>
         <%end%>
        <%if celllength2 == 0%>
        <%celllength2 = 1%>
        <%end%>




        <th rowspan = <%=celllength2.to_s%>>
          <%=kanren2[0]%>
        </th>
        <%if kanren2[1][0]==nil%>
        <th></th><th></th></tr>
        <%end%>
        <%kanren2[1].each do |kanren3|%>
        <%celllength3 = kanren3[1].size%>
        <%if celllength3 == 0%>
        <%celllength3 = 1%>
        <%end%>

        <th rowspan = <%=celllength3.to_s%>>
          <%=kanren3[0]%>
        </th>
        <%if kanren3[1][0]==nil%>
        <th></th></tr>
        <%end%>
          <%kanren3[1].each_with_index do |kanren4,k|%>

            <th>
              <%=kanren4[0]%>
            </th>
</tr>
          <%end%>
        <%end%>
      <%end%>
    <%end%>


</table>